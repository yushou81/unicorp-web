# 双师课堂接口文档

本文档基于OpenAPI 3.0规范，描述校企联盟平台的双师课堂相关接口。

```yaml
openapi: 3.0.3
info:
  title: 校企联盟平台 - 双师课堂API
  description: 双师课堂功能接口，提供课程创建、查询、报名等功能
  version: 1.0.0
  
servers:
  - url: http://localhost:8081/api
    description: 本地开发环境
  - url: https://api.unicorp.example.com
    description: 生产环境
    
tags:
  - name: 双师课堂
    description: 双师课堂相关操作
  - name: 课程评价
    description: 课程评价相关操作
  - name: 课程资源
    description: 课程资源相关操作
  - name: 课程章节
    description: 课程章节管理
  - name: 学习进度
    description: 学习进度管理
  - name: 课程讨论
    description: 课程讨论功能
  - name: 课程问答
    description: 课程问答功能
  - name: 课程出勤
    description: 课程出勤管理
    
paths:
  /v1/dual-courses:
    post:
      tags:
        - 双师课堂
      summary: 创建双师课堂课程
      description: 创建新的双师课堂课程，需要教师或学校管理员权限
      operationId: createCourse
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DualTeacherCourseDTO'
      responses:
        '200':
          description: 课程创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DualTeacherCourseResponse'
        '400':
          description: 参数错误或权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
  /v1/dual-courses/{id}:
    get:
      tags:
        - 双师课堂
      summary: 获取双师课堂课程详情
      description: 根据ID获取课程详细信息
      operationId: getCourseById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: 获取课程详情成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DualTeacherCourseResponse'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    put:
      tags:
        - 双师课堂
      summary: 更新双师课堂课程信息
      description: 更新现有双师课堂课程的信息，需要该课程的教师、企业导师或学校管理员权限
      operationId: updateCourse
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int32
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DualTeacherCourseDTO'
      responses:
        '200':
          description: 课程更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DualTeacherCourseResponse'
        '400':
          description: 参数错误或权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    delete:
      tags:
        - 双师课堂
      summary: 删除双师课堂课程
      description: 删除指定的双师课堂课程，需要该课程的教师或学校管理员权限
      operationId: deleteCourse
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: 课程删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  
  /v1/dual-courses/{id}/status:
    patch:
      tags:
        - 双师课堂
      summary: 更新课程状态
      description: 更新双师课堂课程的状态，需要该课程的教师或学校管理员权限
      operationId: updateCourseStatus
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int32
        - name: status
          in: query
          required: true
          description: 新状态值
          schema:
            type: string
            enum: [planning, open, in_progress, completed, cancelled]
      responses:
        '200':
          description: 状态更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DualTeacherCourseResponse'
        '400':
          description: 参数错误或权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  
  /v1/dual-courses/teacher:
    get:
      tags:
        - 双师课堂
      summary: 获取教师创建的课程列表
      description: 获取当前教师用户创建的所有课程
      operationId: getTeacherCourses
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: 页码，从1开始
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: 每页大小
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: 获取课程列表成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagedDualTeacherCourseResponse'
        '400':
          description: 用户不是教师
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  
  /v1/dual-courses/mentor:
    get:
      tags:
        - 双师课堂
      summary: 获取企业导师参与的课程列表
      description: 获取当前企业导师用户参与的所有课程
      operationId: getMentorCourses
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: 页码，从1开始
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: 每页大小
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: 获取课程列表成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagedDualTeacherCourseResponse'
        '400':
          description: 用户不是企业导师
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  
  /v1/dual-courses/enrollable:
    get:
      tags:
        - 双师课堂
      summary: 获取可报名的课程列表
      description: 获取当前可供学生报名的所有课程
      operationId: getEnrollableCourses
      parameters:
        - name: page
          in: query
          description: 页码，从1开始
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: 每页大小
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: 获取课程列表成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagedDualTeacherCourseResponse'
  
  /v1/dual-courses/enroll:
    post:
      tags:
        - 双师课堂
      summary: 学生报名课程
      description: 学生用户报名双师课堂课程
      operationId: enrollCourse
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseEnrollmentDTO'
      responses:
        '200':
          description: 报名成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 报名失败，可能的原因：用户不是学生、课程不存在、课程未开放报名、已报名该课程、课程人数已满
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  
  /v1/dual-courses/enroll/{courseId}:
    delete:
      tags:
        - 双师课堂
      summary: 学生取消报名
      description: 学生用户取消已报名的课程
      operationId: cancelEnrollment
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: 取消报名成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 取消报名失败，可能的原因：用户未报名该课程、课程已开始或已结束
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  
  /v1/dual-courses/enrolled:
    get:
      tags:
        - 双师课堂
      summary: 获取学生已报名的课程列表
      description: 获取当前学生用户已报名的所有课程
      operationId: getStudentEnrolledCourses
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: 页码，从1开始
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: 每页大小
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: 获取课程列表成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagedDualTeacherCourseResponse'
        '400':
          description: 用户不是学生
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/dual-courses/enrollment/{enrollmentId}/status:
    patch:
      tags:
        - 双师课堂
      summary: 更新学生选课状态
      description: 更新学生选课状态，需要课程教师或学校管理员权限
      operationId: updateEnrollmentStatus
      security:
        - bearerAuth: []
      parameters:
        - name: enrollmentId
          in: path
          required: true
          schema:
            type: integer
            format: int32
        - name: status
          in: query
          required: true
          description: 新状态值
          schema:
            type: string
            enum: [enrolled, cancelled, completed]
      responses:
        '200':
          description: 选课状态更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: 参数错误或权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: 权限不足
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: 选课记录不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # 课程评价相关接口
  /v1/course-rating:
    post:
      tags:
        - 课程评价
      summary: 提交课程评价
      description: 学生提交课程评价
      operationId: submitRating
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseRatingDTO'
      responses:
        '200':
          description: 提交成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseRatingVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限评价
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '409':
          description: 已提交过评价
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-rating/{id}:
    get:
      tags:
        - 课程评价
      summary: 获取评价详情
      description: 获取单个评价的详细信息
      operationId: getRatingDetail
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 评价ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseRatingVO'
        '404':
          description: 评价不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    put:
      tags:
        - 课程评价
      summary: 更新评价
      description: 更新已提交的评价，仅限评价提交者
      operationId: updateRating
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 评价ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseRatingDTO'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseRatingVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限修改
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 评价不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    delete:
      tags:
        - 课程评价
      summary: 删除评价
      description: 删除评价，仅限评价提交者或教师/管理员
      operationId: deleteRating
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 评价ID
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
                        example: true
        '403':
          description: 无权限删除
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 评价不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-rating/course/{courseId}:
    get:
      tags:
        - 课程评价
      summary: 获取课程评价列表
      description: 分页获取课程的所有评价
      operationId: getCourseRatings
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: page
          in: query
          description: 页码
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 每页数量
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/PagedResponse'
                          - type: object
                            properties:
                              records:
                                type: array
                                items:
                                  $ref: '#/components/schemas/CourseRatingVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-rating/course/{courseId}/average:
    get:
      tags:
        - 课程评价
      summary: 获取课程平均评分
      description: 获取课程的平均评分
      operationId: getCourseAverageRating
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: number
                        format: float
                        description: 平均评分
                        example: 4.5
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-rating/course/{courseId}/student/{studentId}/has-rated:
    get:
      tags:
        - 课程评价
      summary: 检查学生是否已评价
      description: 检查指定学生是否已对课程进行评价
      operationId: hasStudentRated
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: studentId
          in: path
          required: true
          description: 学生ID
          schema:
            type: integer
      responses:
        '200':
          description: 检查成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
                        description: 是否已评价
                        example: true
        '404':
          description: 课程或学生不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-rating/course/{courseId}/student/{studentId}:
    get:
      tags:
        - 课程评价
      summary: 获取学生对课程的评价
      description: 获取指定学生对课程的评价
      operationId: getStudentRating
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: studentId
          in: path
          required: true
          description: 学生ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseRatingVO'
        '404':
          description: 课程、学生不存在或尚未评价
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-rating/course/{courseId}/statistics:
    get:
      tags:
        - 课程评价
      summary: 获取课程评价统计
      description: 获取课程的评价统计数据
      operationId: getRatingStatistics
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          averageRating:
                            type: number
                            format: float
                            description: 平均评分
                            example: 4.5
                          totalRatings:
                            type: integer
                            description: 总评价数
                            example: 50
                          ratingDistribution:
                            type: object
                            properties:
                              "5":
                                type: integer
                                description: 5星评价数量
                                example: 30
                              "4":
                                type: integer
                                description: 4星评价数量
                                example: 15
                              "3":
                                type: integer
                                description: 3星评价数量
                                example: 3
                              "2":
                                type: integer
                                description: 2星评价数量
                                example: 1
                              "1":
                                type: integer
                                description: 1星评价数量
                                example: 1
                          averageTeachingRating:
                            type: number
                            format: float
                            description: 平均教学评分
                            example: 4.7
                          averageContentRating:
                            type: number
                            format: float
                            description: 平均内容评分
                            example: 4.5
                          averageInteractionRating:
                            type: number
                            format: float
                            description: 平均互动评分
                            example: 4.2
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  # 课程资源相关接口
  /v1/course-resource:
    post:
      tags:
        - 课程资源
      summary: 上传课程资源
      description: 上传新的课程资源，需要教师或管理员权限
      operationId: uploadResource
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: 资源文件
                courseId:
                  type: integer
                  description: 课程ID
                  example: 101
                title:
                  type: string
                  description: 资源标题
                  example: "第一章课件"
                description:
                  type: string
                  description: 资源描述
                  example: "第一章的PPT课件，包含课程介绍和基本概念"
                resourceType:
                  type: string
                  description: 资源类型(document, video, code, other)
                  example: "document"
              required:
                - file
                - courseId
                - title
                - resourceType
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseResourceVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-resource/{id}:
    get:
      tags:
        - 课程资源
      summary: 获取资源详情
      description: 获取单个资源的详细信息
      operationId: getResourceDetail
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 资源ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseResourceVO'
        '404':
          description: 资源不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    put:
      tags:
        - 课程资源
      summary: 更新资源信息
      description: 更新资源的元数据信息，需要资源上传者或教师/管理员权限
      operationId: updateResource
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 资源ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: 资源标题
                  example: "更新后的资源标题"
                description:
                  type: string
                  description: 资源描述
                  example: "更新后的资源描述"
                resourceType:
                  type: string
                  description: 资源类型(document, video, code, other)
                  example: "document"
              required:
                - title
                - resourceType
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseResourceVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 资源不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    delete:
      tags:
        - 课程资源
      summary: 删除资源
      description: 删除资源，需要资源上传者或教师/管理员权限
      operationId: deleteResource
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 资源ID
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
                        example: true
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 资源不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-resource/{id}/download:
    get:
      tags:
        - 课程资源
      summary: 下载资源
      description: 下载资源文件
      operationId: downloadResource
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 资源ID
          schema:
            type: integer
      responses:
        '200':
          description: 下载成功
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        '404':
          description: 资源不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-resource/course/{courseId}:
    get:
      tags:
        - 课程资源
      summary: 获取课程资源列表
      description: 分页获取课程的所有资源
      operationId: getCourseResources
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: resourceType
          in: query
          required: false
          description: 资源类型过滤(document, video, code, other)
          schema:
            type: string
        - name: page
          in: query
          description: 页码
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 每页数量
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/PagedResponse'
                          - type: object
                            properties:
                              records:
                                type: array
                                items:
                                  $ref: '#/components/schemas/CourseResourceVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-resource/search:
    get:
      tags:
        - 课程资源
      summary: 搜索课程资源
      description: 根据关键词搜索课程资源
      operationId: searchResources
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: query
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: keyword
          in: query
          required: true
          description: 搜索关键词
          schema:
            type: string
        - name: resourceType
          in: query
          required: false
          description: 资源类型过滤(document, video, code, other)
          schema:
            type: string
        - name: page
          in: query
          description: 页码
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 每页数量
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 搜索成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/PagedResponse'
                          - type: object
                            properties:
                              records:
                                type: array
                                items:
                                  $ref: '#/components/schemas/CourseResourceVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-resource/course/{courseId}/types:
    get:
      tags:
        - 课程资源
      summary: 获取课程资源类型统计
      description: 获取课程中各类型资源的数量统计
      operationId: getResourceTypeStats
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: object
                        additionalProperties:
                          type: integer
                        description: 各类型资源数量
                        example: {"document": 15, "video": 8, "code": 5, "other": 2}
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  # 获取课程学生列表
  /v1/dual-courses/{id}/students:
    get:
      tags:
        - 双师课堂
      summary: 获取课程学生列表
      description: 获取指定课程ID的已报名学生列表，需要教师或管理员权限
      operationId: getCourseStudents
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: 课程ID
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: 获取学生列表成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: 获取课程学生列表成功
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserVO'
        '400':
          description: 权限不足或课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '401':
          description: 未授权
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  # 课程章节相关接口
  /v1/course-chapter:
    post:
      tags:
        - 课程章节
      summary: 创建课程章节
      description: 为课程创建新的章节，需要教师或管理员权限
      operationId: createChapter
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseChapterDTO'
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseChapterVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-chapter/{id}:
    get:
      tags:
        - 课程章节
      summary: 获取章节详情
      description: 获取单个章节的详细信息
      operationId: getChapterDetail
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseChapterVO'
        '404':
          description: 章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    put:
      tags:
        - 课程章节
      summary: 更新章节
      description: 更新章节信息，需要教师或管理员权限
      operationId: updateChapter
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseChapterDTO'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseChapterVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    delete:
      tags:
        - 课程章节
      summary: 删除章节
      description: 删除章节，需要教师或管理员权限
      operationId: deleteChapter
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
                        example: true
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-chapter/course/{courseId}:
    get:
      tags:
        - 课程章节
      summary: 获取课程章节列表
      description: 获取课程的所有章节列表
      operationId: getCourseChapters
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/CourseChapterVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-chapter/{id}/publish:
    put:
      tags:
        - 课程章节
      summary: 发布章节
      description: 发布章节，使学生可以访问，需要教师或管理员权限
      operationId: publishChapter
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
      responses:
        '200':
          description: 发布成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseChapterVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-chapter/{id}/unpublish:
    put:
      tags:
        - 课程章节
      summary: 取消发布章节
      description: 取消发布章节，使学生无法访问，需要教师或管理员权限
      operationId: unpublishChapter
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
      responses:
        '200':
          description: 取消发布成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseChapterVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-chapter/course/{courseId}/reorder:
    put:
      tags:
        - 课程章节
      summary: 重新排序章节
      description: 重新排序课程的章节，需要教师或管理员权限
      operationId: reorderChapters
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                chapterOrders:
                  type: array
                  description: 章节ID和新顺序的映射
                  items:
                    type: object
                    properties:
                      chapterId:
                        type: integer
                        description: 章节ID
                        example: 1
                      sequence:
                        type: integer
                        description: 新的顺序值
                        example: 2
                    required:
                      - chapterId
                      - sequence
              required:
                - chapterOrders
      responses:
        '200':
          description: 重新排序成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
                        example: true
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 课程或章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-chapter/{id}/resources:
    get:
      tags:
        - 课程章节
      summary: 获取章节资源
      description: 获取章节关联的所有资源
      operationId: getChapterResources
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/CourseResourceVO'
        '404':
          description: 章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-chapter/{id}/resources/add:
    post:
      tags:
        - 课程章节
      summary: 添加章节资源
      description: 为章节添加资源，需要教师或管理员权限
      operationId: addChapterResource
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                resourceId:
                  type: integer
                  description: 资源ID
                  example: 1
              required:
                - resourceId
      responses:
        '200':
          description: 添加成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
                        example: true
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 章节或资源不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-chapter/{id}/resources/remove:
    post:
      tags:
        - 课程章节
      summary: 移除章节资源
      description: 从章节中移除资源，需要教师或管理员权限
      operationId: removeChapterResource
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                resourceId:
                  type: integer
                  description: 资源ID
                  example: 1
              required:
                - resourceId
      responses:
        '200':
          description: 移除成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
                        example: true
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 章节或资源不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  # 学习进度相关接口
  /v1/learning-progress:
    post:
      tags:
        - 学习进度
      summary: 更新学习进度
      description: 更新学生在课程章节的学习进度
      operationId: updateProgress
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LearningProgressDTO'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/LearningProgressVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/learning-progress/{id}:
    get:
      tags:
        - 学习进度
      summary: 获取学习进度详情
      description: 根据ID获取学习进度详情
      operationId: getProgressById
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 学习进度记录ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/LearningProgressVO'
        '404':
          description: 记录不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/learning-progress/course/{courseId}/student/{studentId}:
    get:
      tags:
        - 学习进度
      summary: 获取学生在课程中的学习进度
      description: 获取指定学生在课程中的所有章节学习进度
      operationId: getStudentCourseProgress
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: studentId
          in: path
          required: true
          description: 学生ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/LearningProgressVO'
        '404':
          description: 课程或学生不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/learning-progress/chapter/{chapterId}/student/{studentId}:
    get:
      tags:
        - 学习进度
      summary: 获取学生在章节的学习进度
      description: 获取指定学生在特定章节的学习进度
      operationId: getStudentChapterProgress
      security:
        - bearerAuth: []
      parameters:
        - name: chapterId
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
        - name: studentId
          in: path
          required: true
          description: 学生ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/LearningProgressVO'
        '404':
          description: 章节或学生不存在，或尚无学习记录
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/learning-progress/course/{courseId}/statistics:
    get:
      tags:
        - 学习进度
      summary: 获取课程学习进度统计
      description: 获取课程的整体学习进度统计数据
      operationId: getCourseProgressStatistics
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          totalStudents:
                            type: integer
                            description: 总学生数
                            example: 40
                          averageProgress:
                            type: integer
                            description: 平均进度百分比
                            example: 65
                          completionRate:
                            type: integer
                            description: 完成率百分比
                            example: 30
                          chapterProgressRates:
                            type: object
                            additionalProperties:
                              type: integer
                            description: 各章节的平均进度
                            example: {"1": 95, "2": 80, "3": 60, "4": 40, "5": 20}
                          studentProgressList:
                            type: array
                            description: 学生进度列表
                            items:
                              type: object
                              properties:
                                studentId:
                                  type: integer
                                  description: 学生ID
                                  example: 1001
                                studentName:
                                  type: string
                                  description: 学生姓名
                                  example: "张三"
                                averageProgress:
                                  type: integer
                                  description: 平均进度百分比
                                  example: 75
                                completedChapters:
                                  type: integer
                                  description: 已完成章节数
                                  example: 3
                                totalChapters:
                                  type: integer
                                  description: 总章节数
                                  example: 5
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/learning-progress/chapter/{chapterId}/statistics:
    get:
      tags:
        - 学习进度
      summary: 获取章节学习进度统计
      description: 获取特定章节的学习进度统计数据
      operationId: getChapterProgressStatistics
      security:
        - bearerAuth: []
      parameters:
        - name: chapterId
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          totalStudents:
                            type: integer
                            description: 总学生数
                            example: 40
                          averageProgress:
                            type: integer
                            description: 平均进度百分比
                            example: 65
                          completionRate:
                            type: integer
                            description: 完成率百分比
                            example: 30
                          averageTimeSpent:
                            type: integer
                            description: 平均学习时间(分钟)
                            example: 45
                          studentProgressList:
                            type: array
                            description: 学生进度列表
                            items:
                              type: object
                              properties:
                                studentId:
                                  type: integer
                                  description: 学生ID
                                  example: 1001
                                studentName:
                                  type: string
                                  description: 学生姓名
                                  example: "张三"
                                progress:
                                  type: integer
                                  description: 进度百分比
                                  example: 75
                                isCompleted:
                                  type: boolean
                                  description: 是否已完成
                                  example: false
                                timeSpent:
                                  type: integer
                                  description: 学习时间(分钟)
                                  example: 60
        '404':
          description: 章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  # 课程讨论相关接口
  /v1/course-discussion:
    post:
      tags:
        - 课程讨论
      summary: 创建讨论
      description: 在课程中创建新的讨论或回复已有讨论
      operationId: createDiscussion
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseDiscussionDTO'
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseDiscussionVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-discussion/{id}:
    get:
      tags:
        - 课程讨论
      summary: 获取讨论详情
      description: 获取单个讨论的详细信息
      operationId: getDiscussionDetail
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 讨论ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseDiscussionVO'
        '404':
          description: 讨论不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    put:
      tags:
        - 课程讨论
      summary: 更新讨论内容
      description: 更新已有讨论的内容，仅限讨论创建者
      operationId: updateDiscussion
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 讨论ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                  description: 更新后的讨论内容
                  example: "更新后的讨论内容..."
              required:
                - content
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseDiscussionVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限修改
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 讨论不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    delete:
      tags:
        - 课程讨论
      summary: 删除讨论
      description: 删除讨论，仅限讨论创建者或教师/管理员
      operationId: deleteDiscussion
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 讨论ID
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
                        example: true
        '403':
          description: 无权限删除
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 讨论不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-discussion/course/{courseId}:
    get:
      tags:
        - 课程讨论
      summary: 获取课程讨论列表
      description: 分页获取课程的所有顶级讨论
      operationId: getCourseDiscussions
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: page
          in: query
          description: 页码
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 每页数量
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/PagedResponse'
                          - type: object
                            properties:
                              records:
                                type: array
                                items:
                                  $ref: '#/components/schemas/CourseDiscussionVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-discussion/{discussionId}/replies:
    get:
      tags:
        - 课程讨论
      summary: 获取讨论回复
      description: 分页获取指定讨论的回复
      operationId: getDiscussionReplies
      security:
        - bearerAuth: []
      parameters:
        - name: discussionId
          in: path
          required: true
          description: 讨论ID
          schema:
            type: integer
        - name: page
          in: query
          description: 页码
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 每页数量
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/PagedResponse'
                          - type: object
                            properties:
                              records:
                                type: array
                                items:
                                  $ref: '#/components/schemas/CourseDiscussionVO'
        '404':
          description: 讨论不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-discussion/course/{courseId}/count:
    get:
      tags:
        - 课程讨论
      summary: 统计课程讨论数量
      description: 获取课程的讨论总数
      operationId: countCourseDiscussions
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: integer
                        description: 讨论总数
                        example: 25
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  # 课程问答相关接口
  /v1/course-question:
    post:
      tags:
        - 课程问答
      summary: 学生提问
      description: 学生在课程中提出问题
      operationId: askQuestion
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseQuestionDTO'
      responses:
        '200':
          description: 提问成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseQuestionVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 课程或章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-question/{id}/answer:
    post:
      tags:
        - 课程问答
      summary: 教师回答问题
      description: 教师或企业导师回答学生的问题
      operationId: answerQuestion
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 问题ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                answer:
                  type: string
                  description: 回答内容
                  example: "这个问题的答案是..."
              required:
                - answer
      responses:
        '200':
          description: 回答成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseQuestionVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限回答
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 问题不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-question/{id}:
    get:
      tags:
        - 课程问答
      summary: 获取问题详情
      description: 获取单个问题的详细信息
      operationId: getQuestionDetail
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 问题ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseQuestionVO'
        '404':
          description: 问题不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    put:
      tags:
        - 课程问答
      summary: 更新问题
      description: 更新问题内容，仅限问题提出者
      operationId: updateQuestion
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 问题ID
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: 问题标题
                  example: "更新后的问题标题"
                content:
                  type: string
                  description: 问题内容
                  example: "更新后的问题内容..."
              required:
                - title
                - content
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseQuestionVO'
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限修改
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 问题不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
    
    delete:
      tags:
        - 课程问答
      summary: 删除问题
      description: 删除问题，仅限问题提出者或教师/管理员
      operationId: deleteQuestion
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 问题ID
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
                        example: true
        '403':
          description: 无权限删除
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 问题不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-question/course/{courseId}:
    get:
      tags:
        - 课程问答
      summary: 获取课程问题列表
      description: 分页获取课程的所有问题
      operationId: getCourseQuestions
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: status
          in: query
          required: false
          description: 问题状态(pending, answered, closed)
          schema:
            type: string
            enum: [pending, answered, closed]
        - name: page
          in: query
          description: 页码
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 每页数量
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/PagedResponse'
                          - type: object
                            properties:
                              records:
                                type: array
                                items:
                                  $ref: '#/components/schemas/CourseQuestionVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-question/chapter/{chapterId}:
    get:
      tags:
        - 课程问答
      summary: 获取章节问题列表
      description: 分页获取章节的所有问题
      operationId: getChapterQuestions
      security:
        - bearerAuth: []
      parameters:
        - name: chapterId
          in: path
          required: true
          description: 章节ID
          schema:
            type: integer
        - name: status
          in: query
          required: false
          description: 问题状态(pending, answered, closed)
          schema:
            type: string
            enum: [pending, answered, closed]
        - name: page
          in: query
          description: 页码
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 每页数量
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/PagedResponse'
                          - type: object
                            properties:
                              records:
                                type: array
                                items:
                                  $ref: '#/components/schemas/CourseQuestionVO'
        '404':
          description: 章节不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-question/student/{studentId}:
    get:
      tags:
        - 课程问答
      summary: 获取学生问题列表
      description: 分页获取学生的所有问题
      operationId: getStudentQuestions
      security:
        - bearerAuth: []
      parameters:
        - name: studentId
          in: path
          required: true
          description: 学生ID
          schema:
            type: integer
        - name: status
          in: query
          required: false
          description: 问题状态(pending, answered, closed)
          schema:
            type: string
            enum: [pending, answered, closed]
        - name: page
          in: query
          description: 页码
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 每页数量
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/PagedResponse'
                          - type: object
                            properties:
                              records:
                                type: array
                                items:
                                  $ref: '#/components/schemas/CourseQuestionVO'
        '404':
          description: 学生不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-question/course/{courseId}/statistics:
    get:
      tags:
        - 课程问答
      summary: 获取问答统计数据
      description: 获取课程的问答统计数据
      operationId: getQuestionStatistics
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          totalQuestions:
                            type: integer
                            description: 总问题数
                            example: 50
                          answeredQuestions:
                            type: integer
                            description: 已回答问题数
                            example: 40
                          pendingQuestions:
                            type: integer
                            description: 待回答问题数
                            example: 10
                          closedQuestions:
                            type: integer
                            description: 已关闭问题数
                            example: 0
                          averageResponseTime:
                            type: integer
                            description: 平均回答时间(小时)
                            example: 24
                          chapterDistribution:
                            type: object
                            additionalProperties:
                              type: integer
                            description: 各章节的问题分布
                            example: {"1": 15, "2": 10, "3": 25}
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-question/teacher/{teacherId}/pending-count:
    get:
      tags:
        - 课程问答
      summary: 获取待回答问题数量
      description: 获取教师需要回答的待回答问题数量
      operationId: getPendingQuestionCount
      security:
        - bearerAuth: []
      parameters:
        - name: teacherId
          in: path
          required: true
          description: 教师ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: integer
                        description: 待回答问题数量
                        example: 10
        '404':
          description: 教师不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  # 课程出勤相关接口
  /v1/course-attendance:
    post:
      tags:
        - 课程出勤
      summary: 记录课程出勤
      description: 记录课程的学生出勤情况，需要教师或管理员权限
      operationId: recordAttendance
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseAttendanceDTO'
      responses:
        '200':
          description: 记录成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
        '400':
          description: 参数错误
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-attendance/{id}:
    put:
      tags:
        - 课程出勤
      summary: 更新出勤记录
      description: 更新指定ID的出勤记录，需要教师或管理员权限
      operationId: updateAttendance
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 出勤记录ID
          schema:
            type: integer
        - name: status
          in: query
          required: true
          description: 出勤状态
          schema:
            type: string
            enum: [present, absent, late]
        - name: remark
          in: query
          required: false
          description: 备注
          schema:
            type: string
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CourseAttendanceVO'
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 出勤记录不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
                
    delete:
      tags:
        - 课程出勤
      summary: 删除出勤记录
      description: 删除指定ID的出勤记录，需要教师或管理员权限
      operationId: deleteAttendance
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: 出勤记录ID
          schema:
            type: integer
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: boolean
        '403':
          description: 无权限
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'
        '404':
          description: 出勤记录不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-attendance/course/{courseId}/date/{date}:
    get:
      tags:
        - 课程出勤
      summary: 获取课程某天的出勤记录
      description: 获取课程在指定日期的所有学生出勤记录
      operationId: getCourseAttendanceByDate
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: date
          in: path
          required: true
          description: 日期（格式：yyyy-MM-dd）
          schema:
            type: string
            format: date
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/CourseAttendanceVO'
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-attendance/course/{courseId}/student/{studentId}:
    get:
      tags:
        - 课程出勤
      summary: 获取学生出勤记录
      description: 获取学生在课程中的所有出勤记录
      operationId: getStudentAttendance
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: studentId
          in: path
          required: true
          description: 学生ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/CourseAttendanceVO'
        '404':
          description: 课程或学生不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-attendance/course/{courseId}/dates:
    get:
      tags:
        - 课程出勤
      summary: 获取课程出勤日期列表
      description: 分页获取课程的所有出勤日期列表
      operationId: getCourseAttendanceDates
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: page
          in: query
          description: 页码
          schema:
            type: integer
            default: 1
        - name: size
          in: query
          description: 每页数量
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/PagedResponse'
                          - type: object
                            properties:
                              records:
                                type: array
                                items:
                                  type: string
                                  format: date
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-attendance/course/{courseId}/attendance-rate:
    get:
      tags:
        - 课程出勤
      summary: 获取课程出勤率
      description: 获取课程的整体出勤率
      operationId: getCourseAttendanceRate
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: integer
                        description: 出勤率百分比
                        example: 85
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-attendance/course/{courseId}/student/{studentId}/attendance-rate:
    get:
      tags:
        - 课程出勤
      summary: 获取学生出勤率
      description: 获取指定学生在课程中的出勤率
      operationId: getStudentAttendanceRate
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
        - name: studentId
          in: path
          required: true
          description: 学生ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: integer
                        description: 出勤率百分比
                        example: 90
        '404':
          description: 课程或学生不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'

  /v1/course-attendance/course/{courseId}/statistics:
    get:
      tags:
        - 课程出勤
      summary: 获取课程出勤统计
      description: 获取课程的出勤统计数据
      operationId: getAttendanceStatistics
      security:
        - bearerAuth: []
      parameters:
        - name: courseId
          in: path
          required: true
          description: 课程ID
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ResultVO'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          totalDates:
                            type: integer
                            description: 总出勤日期数
                            example: 20
                          totalStudents:
                            type: integer
                            description: 总学生数
                            example: 40
                          averageAttendanceRate:
                            type: integer
                            description: 平均出勤率
                            example: 85
                          statusDistribution:
                            type: object
                            properties:
                              present:
                                type: integer
                                description: 出勤人次
                                example: 680
                              absent:
                                type: integer
                                description: 缺勤人次
                                example: 80
                              late:
                                type: integer
                                description: 迟到人次
                                example: 40
                          dateAttendanceRates:
                            type: object
                            additionalProperties:
                              type: integer
                            description: 各日期的出勤率
                            example: {"2023-05-10": 90, "2023-05-12": 85}
        '404':
          description: 课程不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResultVO'